import { Component, OnInit } from '@angular/core';
import {NbDialogRef, NbSelectComponent} from '@nebular/theme';
import {Employees} from '../../component-models/users-model/user.model';
import {OrderEntry} from '../../component-models/orders-model/order.model';
import {UserHelperService} from "../../../services/user.helper.service";

@Component({
  selector: 'app-create-user',
  templateUrl: './create-user.component.html',
  styleUrls: ['./create-user.component.css']
})
export class CreateUserComponent implements OnInit {
  user: Employees;
  surname:string;
  name: string;
  patronymic: string;
  phoneNumber: string;
  direction: string;
  project: string;
  role: string;
  userAvatar: string = 'data:image/jpeg;base64,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';
  orders: OrderEntry[];
  selectedOrder: string[] = [];

  constructor(protected ref: NbDialogRef<CreateUserComponent>, private userHelperService: UserHelperService) { }

  ngOnInit(): void {
    if (this.user) {
      this.surname = this.user.surname;
      this.name = this.user.name;
      this.patronymic = this.user.patronymic;
      this.phoneNumber = this.user.phoneNumber;
      this.direction = this.user.direction;
      this.project = this.user.project;
      this.role = 'nothing';
    } else {
      this.surname = '';
      this.name = '';
      this.patronymic = '';
      this.phoneNumber = '';
      this.direction = '';
      this.project = '';
      this.role = '';
    }

  }
  cancel() {
    this.ref.close(false)
  }

  submit() {
    this.ref.close({
      surname: this.surname,
      name: this.name,
      patronymic: this.patronymic,
      phoneNumber: this.phoneNumber,
      direction: this.direction,
      project: this.selectedOrder.length > 0 ? this.userHelperService.convertUserProject(this.selectedOrder) : '',
      userAvatar: this.userAvatar,
      role: this.role
    })
  }

  onChangeSelectedOrder(selectedOrders: NbSelectComponent) {
    this.selectedOrder = selectedOrders.selected;
  }
}
